<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  
  <link rel="shortcut icon" href="../../img/favicon.ico">
  <title>Setup Tapirs - Tapirs</title>
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css">
  
  <script>
    // Current page data
    var mkdocs_page_name = "Setup Tapirs";
    var mkdocs_page_input_path = "How-To-Guide/setup.md";
    var mkdocs_page_url = null;
  </script>
  
  <script src="../../js/jquery-2.1.1.min.js" defer></script>
  <script src="../../js/modernizr-2.8.3.min.js" defer></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script> 
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href="../.." class="icon icon-home"> Tapirs</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
	<ul class="current">
	  
          
            <li class="toctree-l1">
		
    <a class="" href="../..">Home</a>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">How-To-Guide</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../installation/">Installation</a>
                </li>
                <li class=" current">
                    
    <a class="current" href="./">Setup Tapirs</a>
    <ul class="subnav">
            
    <li class="toctree-l3"><a href="#config-files">CONFIG FILES</a></li>
    

    <li class="toctree-l3"><a href="#data">DATA</a></li>
    
        <ul>
        
            <li><a class="toctree-l4" href="#demultiplexed">demultiplexed</a></li>
        
            <li><a class="toctree-l4" href="#databases">Databases</a></li>
        
        </ul>
    

    <li class="toctree-l3"><a href="#dry-run-snakefile">DRY RUN SNAKEFILE</a></li>
    

    </ul>
                </li>
                <li class="">
                    
    <a class="" href="../extending/">Extending the Workflow</a>
                </li>
                <li class="">
                    
    <a class="" href="../reproducibility/">Reproducibiility</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Tutorials</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../Tutorials/blast_tutorial/">Basic blast</a>
                </li>
                <li class="">
                    
    <a class="" href="../../Tutorials/kraken_tutorial/">Kraken2</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">About</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../About/faqs/">FAQs</a>
                </li>
                <li class="">
                    
    <a class="" href="../../About/design/">Design</a>
                </li>
                <li class="">
                    
    <a class="" href="../../About/background/">Background</a>
                </li>
    </ul>
	    </li>
          
        </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../..">Tapirs</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../..">Docs</a> &raquo;</li>
    
      
        
          <li>How-To-Guide &raquo;</li>
        
      
    
    <li>Setup Tapirs</li>
    <li class="wy-breadcrumbs-aside">
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <div class="admonition warning">
<p class="admonition-title">install first then setup</p>
<p>These instructions are to set up Tapirs after <a href="../installation/">installation</a> has been carried out.</p>
</div>
<h1 id="config-files">CONFIG FILES</h1>
<p>The <code>config.yaml</code> file contains settings for the workflow's operation. Most of them have reasonable default values, but some (like specifying the location of your data) require your input. Open <code>config.yaml</code> in a text editor.</p>
<ol>
<li>set a name for your experiment (default=expt_name)</li>
<li>set the directory containing your <strong>demultiplexed</strong> fastq.gz data (default=data/demultiplexed)</li>
<li>set the location of your databases (ignore if not using the program)<ul>
<li>blast database</li>
<li>Kraken2 database</li>
</ul>
</li>
<li>set fastp parameters for quality control and read merging</li>
<li>set blast parameters</li>
</ol>
<h1 id="data">DATA</h1>
<p>The <code>/data</code> directory should contain 2 subdirectories <code>/demultiplexed</code> <code>/databases</code></p>
<h2 id="demultiplexed">demultiplexed</h2>
<p>The start point of this workflows is demultiplexed fastq.gz sequence files in the data/demultiplexed directory. There are many ways to produce these files, and your sequencing machine or sequencing centre will most likely return this as the default data.</p>
<p>It is essential for reproducibility that this starting data is kept together with the experiment. If size prohibits its inclusion then archive it publicly and include the doi into the experimental record.</p>
<div class="admonition tip">
<p class="admonition-title">tip: exclude data directory from version control</p>
<p>Remember that if you are wisely keeping your analysis under git version control, then you can exclude very large data files from syncing to the web by including the data directory in your .gitignore file. It is essential however that you make other arrangements for both backing up and publishing the data.</p>
</div>
<h2 id="databases">Databases</h2>
<h3 id="kraken2">Kraken2</h3>
<p>In order to run a Kraken analysis you will need to create a Kraken database for the program to search your query sequences against. These databases can be large and require a lot of RAM and time to build them. They only need to be made once however and then all subsequent analyses can be performed against the same database. If you are building a custom database from a few thousand sequences then database construction will likely be quick.</p>
<p>See the <a href="../../Tutorials/kraken_tutorial/">Kraken Tutorial</a> and the <a href="https://ccb.jhu.edu/software/kraken2/index.shtml?t=manual">Kraken2 manual</a> for information on building Kraken databases.</p>
<div class="admonition note">
<p class="admonition-title">create a Kraken database</p>
<p>If you have a single fasta format file (allseqs.fas) containing all the sequences to be included in the database, then you could create a kraken database with the command:</p>
<p><code>database creation example here</code></p>
</div>
<p>It is essential for reproducibility that you publicly archive your database at the end of the experiment. Zenodo.org is a suitable location.</p>
<h3 id="blast">blast</h3>
<p>You will need to build a blastn database from a collection of fasta files. Information on this can be found at the NCBI site <a href="https://www.ncbi.nlm.nih.gov/books/NBK279680/">Blast help pages</a>.</p>
<div class="admonition note">
<p class="admonition-title">create a blast database</p>
<p>If you have a single fasta format file (allseqs.fas) containing all the sequences to be included in the database, then you could create a blast database with the command:</p>
<p><code>database creation example here</code></p>
</div>
<p>See the <a href="../../Tutorials/blast_tutorial/">Blast Tutorial</a> for more detailed help</p>
<p>It is essential for reproducibility that you publicly archive your database at the end of the experiment. <a href="zenodo.org">Zenodo.org</a> is a suitable location.</p>
<h3 id="taxonomy-database">taxonomy database</h3>
<p>Several programs require the NCBI taxonomy database in order to carry out taxonomic assignment (BASTA, Kraken).</p>
<h1 id="dry-run-snakefile">DRY RUN SNAKEFILE</h1>
<p>Make sure you are in the directory containing the snakefile then type <code>snakefile -npr</code> to dry-run the workflow.</p>
<p>If all has gone well Snakemake will report the jobs it needs to perform without any complaint. If not (and it is the usual situation) you will need to diagnose and fix any minor issues.</p>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../extending/" class="btn btn-neutral float-right" title="Extending the Workflow">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../installation/" class="btn btn-neutral" title="Installation"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
      
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
      
        <span><a href="../installation/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../extending/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>
    <script>var base_url = '../..';</script>
    <script src="../../js/theme.js" defer></script>
      <script src="../../search/main.js" defer></script>

</body>
</html>
